import.version:3.0.0 {unitt}! 
import {src/word-count}!

describe "Word Count" [
    it "count one word" [
        expects.be:'equal? @[#["word": 1] countWords "word"]
    ]

    it "count one of each word" [
        expects.be:'equal? @[#["one": 1 "of": 1 "each": 1] countWords "one of each"]
    ]

    it "multiple occurrences of a word" [
        expects.be:'equal? @[
            #["one": 1 "fish": 4 "two": 1 "red": 1 "blue": 1]
            countWords "one fish two fish red fish blue fish"
        ]
    ]

    it "handles cramped lists" [
        expects.be:'equal? @[#["one": 1 "two": 1 "three": 1] countWords "one,two,three"]
    ]

    it "handles expanded lists" [
        expects.be:'equal? @[
            #["one": 1 "two": 1 "three": 1]
            countWords "one,\ntwo,\nthree"
        ]
    ]

    it "ignore punctuation" [
        expects.be:'equal? @[
            #["car": 1 "carpet": 1 "as": 1 "java": 1 "javascript": 1]
            countWords "car: carpet as java: javascript!!&@$%^&"
        ]
    ]

    it "include numbers" [
        expects.be:'equal? @[#["iting": 2 "1": 1 "2": 1] countWords "iting, 1, 2 iting"]
    ]

    it "normalize case" [
        expects.be:'equal? @[#["go": 3 "stop": 2] countWords "go Go GO Stop stop"]
    ]

    it "with apostrophes" [
        expects.be:'equal? @[
            #["first": 1 "don't": 2 "laugh": 1 "then": 1 "cry": 1 "you're": 1 "getting": 1 "it": 1]
            countWords "'First: don't laugh. Then: don't cry. You're getting it.'"
        ]
    ]

    it "with quotations" [
        expects.be:'equal? @[
            #["joe": 1 "can't": 1 "tell": 1 "between": 1 "large": 2 "and": 1]
            countWords "Joe can't tell between 'large' and large."
        ]
    ]

    it "substrings from the beginning" [
        expects.be:'equal? @[
            #["joe": 1 "can't": 1 "tell": 1 "between": 1 "app": 1 "apple": 1 "and": 1 "a": 1]
            countWords "Joe can't tell between app, apple and a."
        ]
    ]

    it "multiple spaces not detected as a word" [
        expects.be:'equal? @[
            #["multiple": 1 "whitespaces": 1]
            countWords " multiple   whitespaces"
        ]
    ]

    it "alternating word separators not detected as a word" [
        expects.be:'equal? @[
            #["one": 1 "two": 1 "three": 1]
            countWords ",\n,one,\n ,two \n 'three'"
        ]
    ]

    it "quotation for word with apostrophe" [
        expects.be:'equal? @[#["can": 1 "can't": 2] countWords "can, can't, 'can't'"]
    ]
]
