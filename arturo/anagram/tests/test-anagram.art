import.version:3.0.0 {unitt}! 
import {src/anagram}!

describe "Anagram" [
    it "no matches" [
        expects.be:'equal? @[
            []
            findAnagrams "diaper" ["hello" "world" "zombies" "pants"]
        ]
    ]

    it "detects two anagrams" [
        expects.be:'equal? @[
            ["lemons" "melons"]
            findAnagrams "solemn" ["lemons" "cherry" "melons"]
        ]
    ]

    it "does not detect anagram subsets" [
        expects.be:'equal? @[
            []
            findAnagrams "good" ["dog" "goody"]
        ]
    ]

    it "detects anagram" [
        expects.be:'equal? @[
            ["inlets"]
            findAnagrams "listen" ["enlists" "google" "inlets" "banana"]
        ]
    ]
    
    it "detects three anagrams" [
        expects.be:'equal? @[
            ["gallery" "regally" "largely"]
            findAnagrams "allergy" ["gallery" "ballerina"
                                            "regally" "clergy" 
                                            "largely" "leading"]
        ]
    ]

    it "detects multiple anagrams with different case" [
        expects.be:'equal? @[
            ["Eons" "ONES"]
            findAnagrams "nose" ["Eons" "ONES"]
        ]
    ]

    it "does not detect non-anagrams with identical checksum" [
        expects.be:'equal? @[
            []
            findAnagrams "mass" ["last"]
        ]
    ]

    it "detects anagrams case-insensitively" [
        expects.be:'equal? @[
            ["Carthorse"]
            findAnagrams "Orchestra" ["cashregister" "Carthorse" "radishes"]
        ]
    ]

    it "detects anagrams using case-insensitive subject" [
        expects.be:'equal? @[
            ["carthorse"]
            findAnagrams "Orchestra" ["cashregister" "carthorse" "radishes"]
        ]
    ]

    it "detects anagrams using case-insensitive possible matches" [
        expects.be:'equal? @[
            ["Carthorse"]
            findAnagrams "orchestra" ["cashregister" "Carthorse" "radishes"]
        ]
    ]

    it "does not detect an anagram if the original word is repeated" [
        expects.be:'equal? @[
            []
            findAnagrams "go" ["goGoGO"]
        ]
    ]

    it "anagrams must use all letters exactly once" [
        expects.be:'equal? @[
            []
            findAnagrams "tapper" ["patter"]
        ]
    ]

    it "words are not anagrams of themselves" [
        expects.be:'equal? @[
            []
            findAnagrams "BANANA" ["BANANA"]
        ]
    ]

    it "words are not anagrams of themselves even if letter case is partially different" [
        expects.be:'equal? @[
            []
            findAnagrams "BANANA" ["Banana"]
        ]
    ]

    it "words are not anagrams of themselves even if letter case is completely different" [
        expects.be:'equal? @[
            []
            findAnagrams "BANANA" ["banana"]
        ]
    ]

    it "words other than themselves can be anagrams" [
        expects.be:'equal? @[
            ["Silent"]
            findAnagrams "LISTEN" ["Listen" "Silent" "LISTEN"]
        ]
    ]

    it "handles case of greek letters" [
        expects.be:'equal? @[
            ["ΒΓΑ" "γβα"]
            findAnagrams "ΑΒΓ" ["ΒΓΑ" "ΒΓΔ" "γβα" "αβγ"]
        ]
    ]

    it "different characters may have the same bytes" [
        expects.be:'equal? @[
            []
            findAnagrams "a⬂" ["€a"]
        ]
    ]
]
