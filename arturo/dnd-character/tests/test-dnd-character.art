import.version:3.0.0 {unitt}! 
import {src/dnd-character}!

describe "D&D Character" [
    it "ability modifier for score 3 is -4" [
        expects.be:'equal? @[neg 4 modifier 3]
    ]

    it "ability modifier for score 4 is -3" [
        expects.be:'equal? @[neg 3 modifier 4]
    ]
    
    it "ability modifier for score 5 is -3" [
        expects.be:'equal? @[neg 3 modifier 5]
    ]
    
    it "ability modifier for score 6 is -2" [
        expects.be:'equal? @[neg 2 modifier 6]
    ]
    
    it "ability modifier for score 7 is -2" [
        expects.be:'equal? @[neg 2 modifier 7]
    ]
    
    it "ability modifier for score 8 is -1" [
        expects.be:'equal? @[neg 1 modifier 8]
    ]
    
    it "ability modifier for score 9 is -1" [
        expects.be:'equal? @[neg 1 modifier 9]
    ]
    
    it "ability modifier for score 10 is 0" [
        expects.be:'equal? @[0 modifier 10]
    ]
    
    it "ability modifier for score 11 is 0" [
        expects.be:'equal? @[0 modifier 11]
    ]
    
    it "ability modifier for score 12 is +1" [
        expects.be:'equal? @[1 modifier 12]
    ]
    
    it "ability modifier for score 13 is +1" [
        expects.be:'equal? @[1 modifier 13]
    ]
    
    it "ability modifier for score 14 is +2" [
        expects.be:'equal? @[2 modifier 14]
    ]
    
    it "ability modifier for score 15 is +2" [
        expects.be:'equal? @[2 modifier 15]
    ]
    
    it "ability modifier for score 16 is +3" [
        expects.be:'equal? @[3 modifier 16]
    ]
    
    it "ability modifier for score 17 is +3" [
        expects.be:'equal? @[3 modifier 17]
    ]
    
    it "ability modifier for score 18 is +4" [
        expects.be:'equal? @[4 modifier 18]
    ]

    it "random ability is within range" [
        expects.be:'contains? @[3..18 ability]
    ]

    it "random character is valid" [
        result: makeCharacter
        expects.be:'contains? @[3..18 result\strength]
        expects.be:'contains? @[3..18 result\strength]
        expects.be:'contains? @[3..18 result\dexterity]
        expects.be:'contains? @[3..18 result\constitution]
        expects.be:'contains? @[3..18 result\intelligence]
        expects.be:'contains? @[3..18 result\wisdom]
        expects.be:'contains? @[3..18 result\charisma]
        expects.be:'equal? @[
            (+ 10 modifier result\constitution)
            result\hitpoints
        ]
    ]
]
