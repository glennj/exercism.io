import.version:3.0.0 {unitt}! 
import {src/matching-brackets}!

describe "Matching Brackets" [
    it "paired square brackets" [
        expects.be:'true? @[paired? "[]"]
    ]

    it "empty string" [
        expects.be:'true? @[paired? ""]
    ]

    it "unpaired brackets" [
        expects.be:'false? @[paired? "[["]
    ]

    it "wrong ordered brackets" [
        expects.be:'false? @[paired? "}{"]
    ]

    it "wrong closing bracket" [
        expects.be:'false? @[paired? "{]"]
    ]

    it "paired with whitespace" [
        expects.be:'true? @[paired? "{ }"]
    ]

    it "partially paired brackets" [
        expects.be:'false? @[paired? "{[])"]
    ]

    it "simple nested brackets" [
        expects.be:'true? @[paired? "{[]}"]
    ]

    it "several paired brackets" [
        expects.be:'true? @[paired? "{}[]"]
    ]

    it "paired and nested brackets" [
        expects.be:'true? @[paired? "([{}({}[])])"]
    ]

    it "unopened closing brackets" [
        expects.be:'false? @[paired? "{[)][]}"]
    ]

    it "unpaired and nested brackets" [
        expects.be:'false? @[paired? "([{])"]
    ]

    it "paired and wrong nested brackets" [
        expects.be:'false? @[paired? "[({]})"]
    ]

    it "paired and wrong nested brackets but innermost are correct" [
        expects.be:'false? @[paired? "[({}])"]
    ]

    it "paired and incomplete brackets" [
        expects.be:'false? @[paired? "{}["]
    ]

    it "too many closing brackets" [
        expects.be:'false? @[paired? "[]]"]
    ]

    it "early unexpected brackets" [
        expects.be:'false? @[paired? ")()"]
    ]

    it "early mismatched brackets" [
        expects.be:'false? @[paired? "{)()"]
    ]

    it "math expression" [
        expects.be:'true? @[paired? "(((185 + 223.85) * 15) - 543)/2"]
    ]

    it "complex latex expression" [
        expects.be:'true? @[paired? "\left(\begin{array}{cc} \frac{1}{3} & x\\ \mathrm{e}^{x} &... x^2 \end{array}\right)"]
    ]
]
