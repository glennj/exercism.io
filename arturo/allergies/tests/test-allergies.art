import.version:3.0.0 {unitt}! 
import {src/allergies}!

describe "Allergies" [
  describe "Allergies - Eggs" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "eggs"]
    ]

    it "allergic only to eggs" [
        score: to :allergies [1]
        expects.be:'true? [score\allergicTo? "eggs"]
    ]

    it "allergic to eggs and something else" [
        score: to :allergies [3]
        expects.be:'true? [score\allergicTo? "eggs"]
    ]

    it "allergic to something but not eggs" [
        score: to :allergies [2]
        expects.be:'false? [score\allergicTo? "eggs"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "eggs"]
    ]
  ]

  describe "Allergies - Peanuts" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "peanuts"]
    ]

    it "allergic only to peanuts" [
        score: to :allergies [2]
        expects.be:'true? [score\allergicTo? "peanuts"]
    ]

    it "allergic to peanuts and something else" [
        score: to :allergies [7]
        expects.be:'true? [score\allergicTo? "peanuts"]
    ]

    it "allergic to something but not peanuts" [
        score: to :allergies [5]
        expects.be:'false? [score\allergicTo? "peanuts"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "peanuts"]
    ]
  ]

  describe "Allergies - Shellfish" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "shellfish"]
    ]

    it "allergic only to shellfish" [
        score: to :allergies [4]
        expects.be:'true? [score\allergicTo? "shellfish"]
    ]

    it "allergic to shellfish and something else" [
        score: to :allergies [14]
        expects.be:'true? [score\allergicTo? "shellfish"]
    ]

    it "allergic to something but not shellfish" [
        score: to :allergies [10]
        expects.be:'false? [score\allergicTo? "shellfish"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "shellfish"]
    ]
  ]

  describe "Allergies - Strawberries" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "strawberries"]
    ]

    it "allergic only to strawberries" [
        score: to :allergies [8]
        expects.be:'true? [score\allergicTo? "strawberries"]
    ]

    it "allergic to strawberries and something else" [
        score: to :allergies [28]
        expects.be:'true? [score\allergicTo? "strawberries"]
    ]

    it "allergic to something but not strawberries" [
        score: to :allergies [20]
        expects.be:'false? [score\allergicTo? "strawberries"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "strawberries"]
    ]
  ]

  describe "Allergies - Tomatoes" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "tomatoes"]
    ]

    it "allergic only to tomatoes" [
        score: to :allergies [16]
        expects.be:'true? [score\allergicTo? "tomatoes"]
    ]

    it "allergic to tomatoes and something else" [
        score: to :allergies [56]
        expects.be:'true? [score\allergicTo? "tomatoes"]
    ]

    it "allergic to something but not tomatoes" [
        score: to :allergies [40]
        expects.be:'false? [score\allergicTo? "tomatoes"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "tomatoes"]
    ]
  ]

  describe "Allergies - Chocolate" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "chocolate"]
    ]

    it "allergic only to chocolate" [
        score: to :allergies [32]
        expects.be:'true? [score\allergicTo? "chocolate"]
    ]

    it "allergic to chocolate and something else" [
        score: to :allergies [112]
        expects.be:'true? [score\allergicTo? "chocolate"]
    ]

    it "allergic to something but not chocolate" [
        score: to :allergies [80]
        expects.be:'false? [score\allergicTo? "chocolate"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "chocolate"]
    ]
  ]

  describe "Allergies - Pollen" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "pollen"]
    ]

    it "allergic only to pollen" [
        score: to :allergies [64]
        expects.be:'true? [score\allergicTo? "pollen"]
    ]

    it "allergic to pollen and something else" [
        score: to :allergies [224]
        expects.be:'true? [score\allergicTo? "pollen"]
    ]

    it "allergic to something but not pollen" [
        score: to :allergies [160]
        expects.be:'false? [score\allergicTo? "pollen"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "pollen"]
    ]
  ]

  describe "Allergies - Cats" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expects.be:'false? [score\allergicTo? "cats"]
    ]

    it "allergic only to cats" [
        score: to :allergies [128]
        expects.be:'true? [score\allergicTo? "cats"]
    ]

    it "allergic to cats and something else" [
        score: to :allergies [192]
        expects.be:'true? [score\allergicTo? "cats"]
    ]

    it "allergic to something but not cats" [
        score: to :allergies [64]
        expects.be:'false? [score\allergicTo? "cats"]
    ]

    it "allergic to everything" [
        score: to :allergies [255]
        expects.be:'true? [score\allergicTo? "cats"]
    ]
  ]

  describe "Allergies - List" [
    it "not allergic to anything" [
        score: to :allergies [0]
        expected: []
        expects.be: 'equal? @[expected score\list]
    ]

    it "just eggs" [
        score: to :allergies [1]
        expected: ["eggs"]
        expects.be: 'equal? @[expected score\list]
    ]

    it "just peanuts" [
        score: to :allergies [2]
        expected: ["peanuts"]
        expects.be: 'equal? @[expected score\list]
    ]

    it "just strawberries" [
        score: to :allergies [8]
        expected: ["strawberries"]
        expects.be: 'equal? @[expected score\list]
    ]

    it "eggs and peanuts" [
        score: to :allergies [3]
        expected: ["eggs" "peanuts"]
        expects.be: 'equal? @[expected score\list]
    ]

    it "more than eggs but not peanuts" [
        score: to :allergies [5]
        expected: ["eggs" "shellfish"]
        expects.be: 'equal? @[expected score\list]
    ]

    it "lots of stuff" [
        score: to :allergies [248]
        expected: [
            "strawberries"
            "tomatoes"
            "chocolate"
            "pollen"
            "cats"
        ]
        expects.be: 'equal? @[expected score\list]
    ]

    it "everything" [
        score: to :allergies [255]
        expected: [
            "eggs"
            "peanuts"
            "shellfish"
            "strawberries"
            "tomatoes"
            "chocolate"
            "pollen"
            "cats"
        ]
        expects.be: 'equal? @[expected score\list]
    ]

    it "no allergen score parts" [
        score: to :allergies [509]
        expected: [
            "eggs"
            "shellfish"
            "strawberries"
            "tomatoes"
            "chocolate"
            "pollen"
            "cats"
        ]
        expects.be: 'equal? @[expected score\list]
    ]

    it "no allergen score parts without highest valid score" [
        score: to :allergies [257]
        expected: ["eggs"]
        expects.be: 'equal? @[expected score\list]
    ]
  ]
]