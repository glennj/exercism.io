import.version:3.0.0 {unitt}! 
import {src/game-of-life}!

describe "Conway's Game of Life" [
    it "empty matrix" [
        expects.be:'equal? @[[] tick []]
    ]

    it "live cells with zero live neighbors die" [
        expects.be:'equal? @[
            [
                [0 0 0]
                [0 0 0]
                [0 0 0] 
            ]
            tick [
                [0 0 0]
                [0 1 0]
                [0 0 0]  
            ]
        ]
    ]

    it "live cells with only one live neighbor die" [
        expects.be:'equal? @[
            [
                [0 0 0]
                [0 0 0]
                [0 0 0]
            ]
            tick [
                [0 0 0]
                [0 1 0]
                [0 1 0]
            ]
        ]
    ]

    it "live cells with two live neighbors stay alive" [
        expects.be:'equal? @[
            [
                [0 0 0]
                [1 0 1]
                [0 0 0]
            ]
            tick [
                [1 0 1]
                [1 0 1]
                [1 0 1]
            ]
        ]
    ]

    it "live cells with three live neighbors stay alive" [
        expects.be:'equal? @[
            [
                [0 0 0]
                [1 0 0]
                [1 1 0]
            ]
            tick [
                [0 1 0]
                [1 0 0]
                [1 1 0]
            ]
        ]
    ]

    it "dead cells with three live neighbors become alive" [
        expects.be:'equal? @[
            [
                [0 0 0]
                [1 1 0]
                [0 0 0]
            ]
            tick [
                [1 1 0]
                [0 0 0]
                [1 0 0]
            ]
        ]
    ]

    it "live cells with four or more neighbors die" [
        expects.be:'equal? @[
            [
                [1 0 1]
                [0 0 0]
                [1 0 1]
            ]
            tick [
                [1 1 1]
                [1 1 1]
                [1 1 1]
            ]
        ]
    ]

    it "bigger matrix" [
        expects.be:'equal? @[
            [
                [1 1 0 1 1 0 0 0]
                [0 0 0 0 0 1 1 0]
                [1 0 1 1 1 1 0 1]
                [1 0 0 0 0 0 0 1]
                [1 1 0 0 1 0 0 1]
                [1 1 0 1 0 0 0 1]
                [1 0 0 0 0 0 0 0]
                [0 0 0 0 0 0 1 1]
            ]
            tick [
                [1 1 0 1 1 0 0 0]
                [1 0 1 1 0 0 0 0]
                [1 1 1 0 0 1 1 1]
                [0 0 0 0 0 1 1 0]
                [1 0 0 0 1 1 0 0]
                [1 1 0 0 0 1 1 1]
                [0 0 1 0 1 0 0 1]
                [1 0 0 0 0 0 1 1]
            ]
        ]
    ]
]
