import.version:3.0.0 {unitt}! 
import {src/flower-field}!

describe "Flower Field"[
  it "no rows" [
    expects.be:'equal? @[
      []
      annotate []
    ]
  ]

  it "no columns" [
    expects.be:'equal? @[
      [""]
      annotate [""]
    ]
  ]

  it "no flowers" [
    garden: [
      "   "
      "   "
      "   "
    ]
    expected: [
      "   "
      "   "
      "   "
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "garden full of flowers" [
    garden: [
      "***"
      "***"
      "***"
    ]
    expected: [
      "***"
      "***"
      "***"
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "flower surrounded by spaces" [
    garden: [
      "   "
      " * "
      "   "
    ]
    expected: [
      "111"
      "1*1"
      "111"
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "space surrounded by flowers" [
    garden: [
      "***"
      "* *"
      "***"
    ]
    expected: [
      "***"
      "*8*"
      "***"
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "horizontal line" [
    garden: [" * * "]
    expected: ["1*2*1"]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "horizontal line, flowers at edges" [
    garden: ["*   *"]
    expected: ["*1 1*"]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "vertical line" [
    garden: [
      " "
      "*"
      " "
      "*"
      " "
    ]
    expected: [
      "1"
      "*"
      "2"
      "*"
      "1"
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "vertical line, flowers at edges" [
    garden: [
      "*"
      " "
      " "
      " "
      "*"
    ]
    expected: [
      "*"
      "1"
      " "
      "1"
      "*"
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "cross" [
    garden: [
      "  *  "
      "  *  "
      "*****"
      "  *  "
      "  *  "
    ]
    expected: [
      " 2*2 "
      "25*52"
      "*****"
      "25*52"
      " 2*2 "
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]

  it "large garden" [
    garden: [
      " *  * "
      "  *   "
      "    * "
      "   * *"
      " *  * "
      "      "
    ]
    expected: [
      "1*22*1"
      "12*322"
      " 123*2"
      "112*4*"
      "1*22*2"
      "111111"
    ]
    expects.be:'equal? @[
      expected
      annotate garden
    ]
  ]
]
