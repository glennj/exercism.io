import.version:3.0.0 {unitt}! 
import {src/isbn-verifier}!

describe "ISBN Verifier" [
    it "valid ISBN" [
        expects.be:'true? @[valid? "3-598-21508-8"]
    ]

    it "invalid ISBN check digit" [
        expects.be:'false? @[valid? "3-598-21508-9"]
    ]

    it "valid ISBN with a check digit of 10" [
        expects.be:'true? @[valid? "3-598-21507-X"]
    ]

    it "check digit is a character other than X" [
        expects.be:'false? @[valid? "3-598-21507-A"]
    ]

    it "invalid check digit in ISBN is not treated as zero" [
        expects.be:'false? @[valid? "4-598-21507-B"]
    ]

    it "invalid character in ISBN is not treated as zero" [
        expects.be:'false? @[valid? "3-598-P1581-X"]
    ]

    it "X is only valid as a check digit" [
        expects.be:'false? @[valid? "3-598-2X507-9"]
    ]

    it "valid ISBN without separating dashes" [
        expects.be:'true? @[valid? "3598215088"]
    ]

    it "ISBN without separating dashes and X as check digit" [
        expects.be:'true? @[valid? "359821507X"]
    ]

    it "ISBN without check digit and dashes" [
        expects.be:'false? @[valid? "359821507"]
    ]

    it "too long ISBN and no dashes" [
        expects.be:'false? @[valid? "3598215078X"]
    ]

    it "too short ISBN" [
        expects.be:'false? @[valid? "00"]
    ]

    it "ISBN without check digit" [
        expects.be:'false? @[valid? "3-598-21507"]
    ]

    it "check digit of X should not be used for 0" [
        expects.be:'false? @[valid? "3-598-21515-X"]
    ]

    it "empty ISBN" [
        expects.be:'false? @[valid? ""]
    ]

    it "input is 9 characters" [
        expects.be:'false? @[valid? "134456729"]
    ]

    it "invalid characters are not ignored after checking length" [
        expects.be:'false? @[valid? "3132P34035"]
    ]

    it "invalid characters are not ignored before checking length" [
        expects.be:'false? @[valid? "3598P215088"]
    ]

    it "input is too long but contains a valid ISBN" [
        expects.be:'false? @[valid? "98245726788"]
    ]
]
