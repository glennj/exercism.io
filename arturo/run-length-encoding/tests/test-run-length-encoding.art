import.version:3.0.0 {unitt}! 
import {src/run-length-encoding}!

describe "Run-Length Encoding" [
    describe "Run-Length Encoding - Encode" [
        it "encode empty string" [
            expects.be:'equal? @[
                ""
                encode ""
            ]
        ]

        it "encode single characters only are encoded without count" [
            expects.be:'equal? @[
                "XYZ"
                encode "XYZ"
            ]
        ]

        it "encode string with no single characters" [
            expects.be:'equal? @[
                "2A3B4C"
                encode "AABBBCCCC"
            ]
        ]

        it "encode single characters mixed with repeated characters" [
            expects.be:'equal? @[
                "12WB12W3B24WB"
                encode "WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWB"
            ]
        ]

        it "encode multiple whitespace mixed in string" [
            expects.be:'equal? @[
                "2 hs2q q2w2 "
                encode "  hsqq qww  "
            ]
        ]

        it "encode lowercase characters" [
            expects.be:'equal? @[
                "2a3b4c"
                encode "aabbbcccc"
            ]
        ]
    ]


    describe "Run-Length Encoding - Decode" [
        it "decode empty string" [
            expects.be:'equal? @[
                ""
                decode ""
            ]
        ]

        it "decode single characters only" [
            expects.be:'equal? @[
                "XYZ"
                decode "XYZ"
            ]
        ]

        it "decode string with no single characters" [
            expects.be:'equal? @[
                "AABBBCCCC"
                decode "2A3B4C"
            ]
        ]

        it "decode single characters with repeated characters" [
            expects.be:'equal? @[
                "WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWB"
                decode "12WB12W3B24WB"
            ]
        ]

        it "decode multiple whitespace mixed in string" [
            expects.be:'equal? @[
                "  hsqq qww  "
                decode "2 hs2q q2w2 "
            ]
        ]

        it "decode lowercase string" [
            expects.be:'equal? @[
                "aabbbcccc"
                decode "2a3b4c"
            ]
        ]

        it "encode followed by decode gives original string" [
            expects.be:'equal? @[
                "zzz ZZ  zZ"
                decode encode "zzz ZZ  zZ"
            ]
        ]
    ]
]
