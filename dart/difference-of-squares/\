class DifferenceOfSquares {
  typedef IntFn = int Function(int n);

  int ident(int n)  => n;
  int square(int n) => n * n;

  int squareOfSum(int n)  => doLoop(n, ident, square);
  int sumOfSquares(int n) => doLoop(n, square, ident);

  int doLoop(int n, IntFn innerFn, IntFn outerFn) {
    int result = 0;
    for (int i = 1; i <= n; i++) {
      result += innerFn(i);
    }
    return outerFn(result);
  }

  int differenceOfSquares(int n) {
    return (sumOfSquares(n) - squareOfSum(n)).abs();
  }
}
